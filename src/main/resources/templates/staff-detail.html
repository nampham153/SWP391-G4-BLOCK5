<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chi tiết nhân viên</title>
    <link rel="stylesheet" href="/css/staff-detail.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- Use the non-deprecated fragment syntax -->
<div th:replace="~{taskbar/manager-taskbar :: managerTaskbar}"></div>

<main class="detail-shell">
    <!-- Header / identity card -->
    <section class="identity-card" th:with="role=${staff.roleName != null ? staff.roleName.name() : ''}">
        <div class="avatar-lg">
            <img src="/images/avatar.png" alt="Avatar">
        </div>

        <div class="identity-meta">
            <h1 class="person-name" th:text="${staff.fullname}">Tên nhân viên</h1>

            <div class="chips">
        <span class="role-chip"
              th:text="${role}"
              th:classappend="' ' + ${#strings.toLowerCase(role)}">STAFF</span>

                <span class="id-chip">
          Mã: <strong th:text="${staff.staffid}">0</strong>
        </span>
            </div>
        </div>

        <a th:href="@{/admin/staff-list}" class="btn-ghost back-link">
            <i class="fas fa-arrow-left"></i>
            Quay lại danh sách
        </a>
    </section>

    <!-- Read-only form-style layout -->
    <section class="readonly-card">
        <h2 class="section-title">
            <i class="fas fa-id-badge"></i>
            Thông tin nhân viên
        </h2>

        <div class="form-grid">
            <!-- Email -->
            <label class="field">
                <span class="field-label"><i class="fas fa-envelope"></i> Địa chỉ Email</span>
                <input class="ro-input" type="text" readonly th:value="${staff.email}">
            </label>

            <!-- Số điện thoại -->
            <label class="field">
                <span class="field-label"><i class="fas fa-phone"></i> Số điện thoại</span>
                <input class="ro-input" type="text" readonly th:value="${staff.phone}">
            </label>

            <!-- CCCD / CMND -->
            <label class="field">
                <span class="field-label"><i class="fas fa-id-card"></i> CCCD/CMND</span>
                <input class="ro-input" type="text" readonly th:value="${staff.idCitizenCard}">
            </label>

            <!-- Vai trò -->
            <label class="field">
                <span class="field-label"><i class="fas fa-user-tag"></i> Vai trò</span>
                <input class="ro-input" type="text" readonly th:value="${staff.roleName}">
            </label>

            <!-- Giới tính -->
            <label class="field">
                <span class="field-label"><i class="fas fa-venus-mars"></i> Giới tính</span>
                <input class="ro-input" type="text" readonly
                       th:value="${staff.sex == true ? 'Nam' : 'Nữ'}">
            </label>
        </div>
    </section>
    <section class="readonly-card">
        <h2 class="section-title">
            <i class="fas fa-user-shield"></i> Hành động
        </h2>
        <div>
            <form th:action="@{'/admin/staffs/' + ${staff.staffid} + '/toggle-block'}" method="post"
                  th:onsubmit="return confirm('Bạn có chắc chắn muốn ' + ( (${#strings.toUpperCase(staff.roleName)} == 'BLOCKED') ? 'mở khóa' : 'khóa') + ' tài khoản nhân viên này?')">
                <button type="submit" class="btn-action btn-danger"
                        th:text="${#strings.toUpperCase(staff.roleName)} == 'BLOCKED' ? 'Mở khóa tài khoản' : 'Khóa tài khoản'">
                    Khóa tài khoản
                </button>
                <!-- if you want to stay on detail after toggle -->
                <input type="hidden" name="from" value="detail">
            </form>
        </div>
    </section>

</main>

</body>
</html>
