<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản lý yêu cầu khách hàng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div th:replace="taskbar/staff-taskbar :: staffTaskbar"></div>
<div class="container py-4">
    <h2 class="mb-3">Danh sách yêu cầu đang chờ xử lý</h2>

    <table class="table table-bordered table-hover bg-white">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Loại giao dịch</th>
            <th>Tên hàng</th>
            <th>Số lượng</th>
            <th>Ngày yêu cầu</th>
            <th>Hành động</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="req : ${requests}">
            <td th:text="${req.id}"></td>
            <td th:text="${req.transactionType}"></td>
            <td th:text="${req.itemName}"></td>
            <td th:text="${req.quantity}"></td>
            <td th:text="${#temporals.format(req.transactionDate, 'dd/MM/yyyy HH:mm')}"></td>
            <td>
                <form th:action="@{'/staff/' + ${staffId} + '/requests/' + ${req.id} + '/approve'}" method="post" class="d-inline">
                    <button type="submit" class="btn btn-success btn-sm">Duyệt</button>
                </form>
                <form th:action="@{'/staff/' + ${staffId} + '/requests/' + ${req.id} + '/reject'}" method="post" class="d-inline">
                    <input type="text" name="reason" placeholder="Lý do" required class="form-control form-control-sm d-inline-block w-auto">
                    <button type="submit" class="btn btn-danger btn-sm">Từ chối</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
